<script setup>
    import { Swiper, SwiperSlide } from 'swiper/vue';
    import { Navigation } from 'swiper/modules';
    import { RouterLink } from 'vue-router';
    import { onMounted, reactive, defineProps } from 'vue';

    import axios from 'axios';

    import TourCard from './TourCard.vue';

    defineProps({
        title: {
            type: String,
            default: '',
        },
        Btn: {
            type: Boolean,
            default: false,
        },
    });

    import 'swiper/css';
    import 'swiper/css/navigation';
    // import 'swiper/css/autoplay ';

    const onSwiper = (swiper) => {
        // console.log(swiper);
    };

    const onSlideChange = () => {
        // console.log('slide change');
    };


    const state = reactive({
        tours: [],
        isLoading: true,
    });

    onMounted(async () => {
        try {
            const response = await axios.get('https://www.flyashgabat.com:4443/api/tours');
            state.tours = response.data.data;

        } catch (error) {
            console.error('Error fetching tours', error);
        } finally {
            state.isLoading = false;
        }
    });




</script>

<template>
    <h2 class=" text-[32px] text-prime-color font-semibold mb-4">
        {{ title }}
    </h2>

    <div class="arrows">
        <button class="arrow-left">
            <svg class="pointer-events-none" width="40" height="40" viewBox="0 0 50 50" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <rect x="49.5" y="49.5" width="49" height="49" rx="24.5" transform="rotate(180 49.5 49.5)"
                    stroke="#223A60" />
                <path
                    d="M20.845 33.1665C20.9209 33.2575 21.015 33.3318 21.1213 33.3845C21.2275 33.4372 21.3436 33.4672 21.462 33.4725C21.5805 33.4779 21.6988 33.4585 21.8094 33.4156C21.9199 33.3727 22.0203 33.3072 22.1042 33.2234C22.1881 33.1395 22.2535 33.0391 22.2964 32.9285C22.3393 32.818 22.3587 32.6997 22.3534 32.5812C22.348 32.4627 22.318 32.3467 22.2653 32.2404C22.2126 32.1342 22.1384 32.0401 22.0473 31.9641L15.9129 25.8225L36.1893 25.8225C36.4082 25.8109 36.6143 25.7158 36.7651 25.5567C36.9159 25.3977 37 25.1869 37 24.9677C37 24.7485 36.9159 24.5376 36.7651 24.3786C36.6143 24.2195 36.4082 24.1244 36.1893 24.1128L15.9129 24.1128L22.0569 17.9784C22.2116 17.8165 22.2978 17.6012 22.2978 17.3773C22.2978 17.1533 22.2116 16.938 22.0569 16.7761C21.9781 16.697 21.8844 16.6342 21.7812 16.5914C21.678 16.5486 21.5674 16.5265 21.4557 16.5265C21.344 16.5265 21.2335 16.5486 21.1303 16.5914C21.0271 16.6342 20.9334 16.697 20.8546 16.7761L13.2558 24.3749C13.1749 24.4528 13.1105 24.5461 13.0666 24.6494C13.0226 24.7527 13 24.8638 13 24.9761C13 25.0883 13.0226 25.1994 13.0666 25.3027C13.1105 25.406 13.1749 25.4994 13.2558 25.5773L20.845 33.1665Z"
                    fill="#223A60" />
            </svg>
        </button>

        <button class="arrow-right">
            <svg class="pointer-events-none" width="40" height="40" viewBox="0 0 50 50" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.5" width="49" height="49" rx="24.5" stroke="#223A60" />
                <path
                    d="M29.155 16.8335C29.0791 16.7425 28.985 16.6682 28.8787 16.6155C28.7725 16.5628 28.6564 16.5328 28.538 16.5275C28.4195 16.5221 28.3012 16.5415 28.1906 16.5844C28.0801 16.6273 27.9797 16.6928 27.8958 16.7766C27.8119 16.8605 27.7465 16.9609 27.7036 17.0715C27.6607 17.182 27.6413 17.3003 27.6466 17.4188C27.652 17.5373 27.682 17.6533 27.7347 17.7596C27.7874 17.8658 27.8616 17.9599 27.9527 18.0359L34.0871 24.1775H13.8107C13.5918 24.1891 13.3857 24.2842 13.2349 24.4433C13.0841 24.6023 13 24.8131 13 25.0323C13 25.2515 13.0841 25.4624 13.2349 25.6214C13.3857 25.7805 13.5918 25.8756 13.8107 25.8872H34.0871L27.9431 32.0216C27.7884 32.1835 27.7022 32.3988 27.7022 32.6227C27.7022 32.8467 27.7884 33.062 27.9431 33.2239C28.0219 33.303 28.1156 33.3658 28.2188 33.4086C28.322 33.4514 28.4326 33.4735 28.5443 33.4735C28.6559 33.4735 28.7665 33.4514 28.8697 33.4086C28.9729 33.3658 29.0666 33.303 29.1454 33.2239L36.7442 25.6251C36.8251 25.5472 36.8895 25.4539 36.9334 25.3506C36.9774 25.2473 37 25.1362 37 25.0239C37 24.9117 36.9774 24.8006 36.9334 24.6973C36.8895 24.594 36.8251 24.5006 36.7442 24.4227L29.155 16.8335Z"
                    fill="#223A60" />
            </svg>
        </button>
    </div>

    <Swiper :modules="[Navigation]" :navigation="{ nextEl: '.arrow-right', prevEl: '.arrow-left' }" :slides-per-view="4"
        :loop="true" :space-between="20" @swiper="onSwiper" @slideChange="onSlideChange" class="mt-5">

        <SwiperSlide v-for="tour in state.tours" :key="tour.id">
            <TourCard :tour="tour" :is-loading="isLoading" />
        </SwiperSlide>
    </Swiper>

    <RouterLink to="/tours" v-if="Btn"
        class="bg-[#223A60] py-5 px-[25px] block w-fit mx-auto mt-5 cursor-pointer rounded-xl">
        <p class=" text-lg text-white font-semibold flex items-center">
            See all

            <span class="block ml-3">
                <svg width="48" height="24" viewBox="0 0 48 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M14.6143 3.17073L11.9314 0.585366C11.5412 0.195122 11.0046 0 10.468 0H8.90703C8.76069 0 8.66313 0.146342 8.71191 0.292683L10.1753 3.26829C11.6387 3.21951 13.1022 3.17073 14.6143 3.17073Z"
                        fill="white" />
                    <path
                        d="M24.418 7.07322C24.0277 5.46346 22.5643 4.29273 20.9058 4.29273C15.6375 4.29273 10.418 4.48785 5.14969 4.82931L4.6131 4.87809C4.41798 4.87809 3.83261 4.09761 3.83261 4.09761C3.49115 3.51224 2.857 3.17078 2.17408 3.17078H1.19847C0.954564 3.17078 0.808222 3.41468 0.857003 3.6098L1.39359 5.80492C1.73505 7.31712 3.05212 8.43907 4.6131 8.53663L5.14969 8.58541C7.00334 8.73175 8.90578 8.82931 10.7594 8.87809L8.71066 13.122C8.66188 13.2683 8.75944 13.4635 8.90578 13.4635H10.4668C11.0033 13.4635 11.5399 13.2683 11.9302 12.8781L15.6375 9.3659C15.8326 9.17078 16.0765 9.122 16.3204 9.122C17.8326 9.17078 19.3936 9.17078 20.9058 9.17078H22.857C23.8814 9.122 24.6619 8.09761 24.418 7.07322Z"
                        fill="white" />
                    <path
                        d="M21.2469 22.1462H18.9542C18.4664 22.1462 18.0273 22.5365 18.0273 23.0731C18.0273 23.6097 18.4176 23.9999 18.9542 23.9999H21.2469C21.7347 23.9999 22.1737 23.6097 22.1737 23.0731C22.1737 22.5365 21.7347 22.1462 21.2469 22.1462Z"
                        fill="white" />
                    <path
                        d="M21.6844 14.1465H19.3917C18.9039 14.1465 18.4648 14.5367 18.4648 15.0733C18.4648 15.6099 18.8551 16.0001 19.3917 16.0001H21.6844C22.1722 16.0001 22.6112 15.6099 22.6112 15.0733C22.6112 14.5367 22.2209 14.1465 21.6844 14.1465Z"
                        fill="white" />
                    <path
                        d="M38.4676 22.1462H36.2237C35.7359 22.1462 35.2969 22.5365 35.2969 23.0731C35.2969 23.6097 35.6871 23.9999 36.2237 23.9999H38.4676C38.9554 23.9999 39.3944 23.6097 39.3944 23.0731C39.3944 22.5365 38.9554 22.1462 38.4676 22.1462Z"
                        fill="white" />
                    <path
                        d="M31.885 7.65851C31.4948 7.99997 31.4948 8.58534 31.8362 8.97558C32.2265 9.41461 32.5192 9.95119 32.6167 10.5366C32.7143 10.9756 33.1045 11.2683 33.5436 11.2683C33.5923 11.2683 33.6411 11.2683 33.7387 11.2683C34.2265 11.1707 34.568 10.6829 34.4704 10.1951C34.2753 9.26826 33.8362 8.39022 33.2021 7.70729C32.8606 7.31705 32.2753 7.31704 31.885 7.65851Z"
                        fill="white" />
                    <path
                        d="M15.5887 14.7803C14.7595 15.2681 14.0765 15.9511 13.6375 16.7803C13.3936 17.2194 13.5887 17.8047 14.0277 18.0486C14.1741 18.0974 14.3204 18.1462 14.4668 18.1462C14.8082 18.1462 15.1009 17.9511 15.296 17.6584C15.5887 17.1218 15.979 16.6828 16.5155 16.3901C16.9546 16.1462 17.1009 15.5608 16.857 15.1218C16.6131 14.6828 16.0277 14.5364 15.5887 14.7803Z"
                        fill="white" />
                    <path
                        d="M15.0989 20.1951C14.9038 19.7073 14.3672 19.4634 13.9282 19.6585C13.4404 19.8537 13.1965 20.3903 13.3916 20.8293C13.733 21.7073 14.3184 22.4878 15.0989 23.0244C15.2452 23.122 15.4404 23.2195 15.6355 23.2195C15.9282 23.2195 16.2208 23.0732 16.3672 22.8293C16.6599 22.439 16.5623 21.8537 16.1721 21.561C15.6843 21.2195 15.3428 20.7805 15.0989 20.1951Z"
                        fill="white" />
                    <path
                        d="M27.0008 22.1464H24.7081C24.2203 22.1464 23.7812 22.5366 23.7812 23.0732C23.7812 23.6098 24.1715 24 24.7081 24H27.0008C27.4886 24 27.9276 23.6098 27.9276 23.0732C27.9276 22.5366 27.4886 22.1464 27.0008 22.1464Z"
                        fill="white" />
                    <path
                        d="M30.0266 15.1707C30.1729 15.561 30.5144 15.8049 30.9046 15.8049C31.0022 15.8049 31.0997 15.8049 31.1973 15.7561C32.0753 15.4634 32.9046 14.9268 33.49 14.1463C33.7827 13.7561 33.7339 13.1707 33.3436 12.8293C32.9534 12.5366 32.368 12.5854 32.0266 12.9756C31.6363 13.4634 31.1485 13.8049 30.6119 14C30.1241 14.1463 29.8802 14.6829 30.0266 15.1707Z"
                        fill="white" />
                    <path
                        d="M32.7625 22.1464H30.4698C29.982 22.1464 29.543 22.5366 29.543 23.0732C29.543 23.6098 29.9332 24 30.4698 24H32.7625C33.2503 24 33.6893 23.6098 33.6893 23.0732C33.6893 22.5366 33.2503 22.1464 32.7625 22.1464Z"
                        fill="white" />
                    <path
                        d="M27.4422 14.1465H25.1495C24.6617 14.1465 24.2227 14.5367 24.2227 15.0733C24.2227 15.6099 24.6129 16.0001 25.1495 16.0001H27.4422C27.93 16.0001 28.369 15.6099 28.369 15.0733C28.369 14.5367 27.9788 14.1465 27.4422 14.1465Z"
                        fill="white" />
                    <path
                        d="M30.3221 7.07307C30.3221 6.58527 29.9319 6.14624 29.3953 6.14624H27.1026C26.6148 6.14624 26.1758 6.53648 26.1758 7.07307C26.1758 7.60966 26.566 7.9999 27.1026 7.9999H29.3953C29.9319 7.9999 30.3221 7.56088 30.3221 7.07307Z"
                        fill="white" />
                    <path
                        d="M42.7144 11.073C40.2266 11.073 38.2266 13.073 38.2266 15.5608C38.2266 18.2925 40.8607 22.0486 42.0802 23.6584C42.3729 24.0486 43.0071 24.0486 43.2997 23.6584C44.5192 22.0486 47.1534 18.2925 47.1534 15.5608C47.2022 13.073 45.2022 11.073 42.7144 11.073ZM42.7144 17.6584C41.5436 17.6584 40.568 16.7315 40.568 15.5608C40.568 14.3901 41.4949 13.4632 42.7144 13.4632C43.8851 13.4632 44.8607 14.3901 44.8607 15.5608C44.8607 16.7315 43.8851 17.6584 42.7144 17.6584Z"
                        fill="white" />
                </svg>
            </span>
        </p>
    </RouterLink>
</template>

<style lang="scss">

    .arrows {
        color: #fff;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        position: absolute;
        top: 50px;
        right: 0;
        z-index: 10;
        column-gap: 15px;
        display: flex;
        align-items: center;

        path {
            transition: all .3s linear;
        }

        button:hover {

            path {
                fill: #fff;
            }

            rect {
                stroke: #223A60;
                fill: #223A60;
            }
        }
    }

</style>
